!function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t),r.d(t,"Yliscript",function(){return s});const i="ylilauta-userscripts-pack";class s{constructor(e,t){this.scriptName=e,this._run(t)}listenNewReplies(e){const t=new MutationObserver(e);$(".answers")[0]&&t.observe($(".answers")[0],{childList:!0})}_run(e){if(!e)return this._error(`Skriptiä <${this.scriptName}> ei ladattu! Lue esimerkit: http://github.com/ohjelmoija/ylilauta-user-framework/`);window.location.href.includes("/preferences?")&&this._addToPreferences(),this._runScript(e)}_runScript(e){this._isScriptEnabled()&&e()}_isScriptEnabled(){if(!this._isStorageCreated())return this._createStorage(),!0;const e=this._getScriptFromStorage();return e?e.enabled:(this._addScriptToStorage(),!0)}_getScriptFromStorage(){const e=localStorage.getItem(i),t=JSON.parse(e).filter(e=>e.name===this.scriptName);if(0!==t.length)return t[0]}_isStorageCreated(){return!!localStorage.getItem(i)}_createStorage(){const e=[{name:this.scriptName,enabled:!0}],t=JSON.stringify(e);localStorage.setItem(i,t)}_addScriptToStorage(){const e=localStorage.getItem(i),t=JSON.parse(e);t.push({name:this.scriptName,enabled:!0});const r=JSON.stringify(t);localStorage.setItem(i,r)}_toggleScriptStorage(e){const t=localStorage.getItem(i),r=JSON.parse(t).map(t=>{return t.enabled=e,t}),s=JSON.stringify(r);localStorage.setItem(i,s)}_addToPreferences(){$('li[data-tabid="userscripts"]').get(0)||this._addPreferenceTab(),$("div.preferences>#userscripts").get(0)||(this._addPreferenceWrapper(),this._loaded()),$(`#userscripts>div.script>span.name:contains("${this.scriptName}")`).get(0)||this._addScriptToWrapper()}_addPreferenceTab(){const e=$('<li class="tab" data-tabid="userscripts">Käyttäjäskriptit</li>');e.on("click",function(){switch_preferences_tab($(this).data("tabid"),!0)}),$("#tabchooser li:last-child").before(e)}_addPreferenceWrapper(){const e=$('<div id="userscripts" class="tab" style="display: none">\n        <h3>JavaScript-käyttäjäskriptit</h3>\n        <p>Huom! Skriptit eivät käynnisty/sammu ilman sivujen uudelleenpäivitystä.</p>\n      </div>');$("div.preferences>#sessions").after(e)}_addScriptToWrapper(){const e=$(`<div class="script">\n        <span class="name">\n          ${this.scriptName}\n        </span>\n      </div>`),t=$(`<input\n        type="checkbox"\n        ${this._isScriptEnabled()?"checked":""}\n      />`).change(e=>this._toggleScriptStorage(e.currentTarget.checked)),r=$(e).prepend(t);$("#userscripts").append(r)}_error(e="Virhe!"){console.error("%c    Ylilauta.fi: pack     ","background: #000; color: #0f0","\n"+e)}_loaded(){console.log("%c Ylilauta.fi: pack loaded ","background: #000; color: #0f0")}}}]);